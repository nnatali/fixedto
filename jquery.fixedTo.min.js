/*
 * jQuery fixedTo
 *
 * Revision: 2.2
 * Date: 06/08/2011
 *
 * Author: Nelly Natali (@nnatali)
 * Plugin URL: https://github.com/nnatali/jquery.fixedTo
 * License: http://creativecommons.org/licenses/by-sa/3.0/
 *
*/
(function(a){a.fn.fixedTo=function(b){return this.each(function(){var c={position:"top",align:"center",hide:true,height_hide:15};var d=a.extend(c,b),e=d.position,f=d.align,g=d.hide,h=d.height_hide;var i=a(this),j=i.outerHeight(),k=i.outerWidth();var l=a.browser.msie?true:false;i.css({position:"fixed"});position_calculate=function(){var b=a(window),c=b.height(),d=b.width();if(e=="top"||e=="bottom"){var g=e=="top"?"top":"bottom",h=f=="right"?"right":"left",m=f=="center"?(d-k)/2:0;var n={};n[g]=0,n[h]=m+"px"}if(e=="right"){if(f=="left"){var o=0}else if(f=="center"){var o=(c-k)/2}else if(f=="right"){var o=c-k}var p=d-k+k;var n={};n["-moz-transform-origin"]="0 0",n["-moz-transform"]="rotate(90deg) translate("+Number(o)+""+"px,-"+Number(p)+"px)",n["-webkit-transform-origin"]="0 0",n["-webkit-transform"]="rotate(90deg) translate("+Number(o)+""+"px,-"+Number(p)+"px)",n["ms-transform-origin"]="0 0",n["ms-transform"]="rotate(90deg) translate("+Number(o)+""+"px,-"+Number(p)+"px)",n["transform-origin"]="0 0",n["transform"]="rotate(90deg) translate("+Number(o)+""+"px,-"+Number(p)+"px)",n["top"]="0";if(l&&a.browser.version!="9.0"){n["-ms-filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=-0, M12=-1, M21=1, M22=-0,sizingMethod='auto expand')";n["filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=0, M12=-1, M21=1, M22=0,sizingMethod='auto expand')";p=d-j;n["marginTop"]=Number(o)+"px";n["marginLeft"]=Number(p)+"px";if(a.browser.version=="7.0"){n["right"]=0}}}if(e=="left"){if(f=="right"){var o=k}else if(f=="center"){var o=k+(c-k)/2}else if(f=="left"){var o=k+(c-k)}var p=0;var n={};n["-moz-transform-origin"]="0 0",n["-moz-transform"]="rotate(270deg) translate(-"+Number(o)+""+"px,-"+Number(p)+"px)",n["-webkit-transform-origin"]="0 0",n["-webkit-transform"]="rotate(270deg) translate(-"+Number(o)+""+"px,-"+Number(p)+"px)",n["ms-transform-origin"]="0 0",n["ms-transform"]="rotate(270deg) translate(-"+Number(o)+""+"px,-"+Number(p)+"px)",n["transform-origin"]="0 0",n["transform"]="rotate(270deg) translate(-"+Number(o)+""+"px,-"+Number(p)+"px)",n["top"]="0";if(l&&a.browser.version!="9.0"){n["-ms-filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=-0, M12=1, M21=-1, M22=-0,sizingMethod='auto expand')";n["filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=-0, M12=1, M21=-1, M22=-0,sizingMethod='auto expand')";if(f=="left"){o=c-k}if(f=="center"){o=(c-k)/2}if(f=="right"){o="0"}n["marginTop"]=Number(o)+"px";n["marginLeft"]=0;if(a.browser.version=="7.0"){n["left"]=0}}}i.css(n)};show_hide=function(){var b=a(".close",i);if(g.toString()=="false"&&b!=undefined){b.remove()}else{if(b.val()==undefined){i.prepend('<a href="#" class="close">X</a>')}a(".close",i).toggle(function(a){a.preventDefault();if(l)i.css({overflow:"hidden",height:h+"px"});else i.css({overflow:"hidden"}).animate({height:h+"px"})},function(a){a.preventDefault();if(l)i.css({overflow:"auto",height:"auto"});else i.css({overflow:"auto"}).animate({height:j+"px"})})}};position_calculate();var m=null;a(window).bind("resize",function(){if(m)clearTimeout(m);m=setTimeout(position_calculate,100)});show_hide()})}})(jQuery)