/*
 * jQuery fixedTo
 *
 * Revision: 2.2
 * Date: 06/08/2011
 *
 * Author: Nelly Natali (@nnatali)
 * Plugin URL: https://github.com/nnatali/jquery.fixedTo
 * License: http://creativecommons.org/licenses/by-sa/3.0/
 *
*/
(function(k){k.fn.fixedTo=function(j){return this.each(function(){var d={position:"top",align:"center",hide:true,height_hide:15};var f=k.extend(d,j),position=f.position,align=f.align,hide=f.hide,height_hide=f.height_hide;var g=k(this),height_element=g.outerHeight(),width_element=g.outerWidth();var h=k.browser.msie?true:false;g.css({"position":"fixed"});position_calculate=function(){var a=k(window),height_thewindow=a.height(),width_thewindow=a.width();if(position=="top"||position=="bottom"){var b=position=="top"?"top":"bottom",horizontal=align=="right"?"right":"left",margin_horizontal=align=="center"?(width_thewindow-width_element)/2:0;var c={};c[b]=0,c[horizontal]=margin_horizontal+"px"};if(position=="right"){if(align=="left"){var y=0}else if(align=="center"){var y=(height_thewindow-width_element)/2}else if(align=="right"){var y=height_thewindow-width_element};var x=(width_thewindow-width_element)+width_element;var c={};c["-moz-transform-origin"]="0 0",c["-moz-transform"]="rotate(90deg) translate("+Number(y)+""+"px,-"+Number(x)+"px)",c["-webkit-transform-origin"]="0 0",c["-webkit-transform"]="rotate(90deg) translate("+Number(y)+""+"px,-"+Number(x)+"px)",c["ms-transform-origin"]="0 0",c["ms-transform"]="rotate(90deg) translate("+Number(y)+""+"px,-"+Number(x)+"px)",c["transform-origin"]="0 0",c["transform"]="rotate(90deg) translate("+Number(y)+""+"px,-"+Number(x)+"px)",c["top"]="0";if(h&&k.browser.version!="9.0"){c["-ms-filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=-0, M12=-1, M21=1, M22=-0,sizingMethod='auto expand')";c["filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=0, M12=-1, M21=1, M22=0,sizingMethod='auto expand')";x=width_thewindow-height_element;c["marginTop"]=Number(y)+"px";c["marginLeft"]=Number(x)+"px";if(k.browser.version=="7.0"){c["right"]=0}}};if(position=="left"){if(align=="right"){var y=width_element}else if(align=="center"){var y=width_element+((height_thewindow-width_element)/2)}else if(align=="left"){var y=width_element+(height_thewindow-width_element)};var x=0;var c={};c["-moz-transform-origin"]="0 0",c["-moz-transform"]="rotate(270deg) translate(-"+Number(y)+""+"px,-"+Number(x)+"px)",c["-webkit-transform-origin"]="0 0",c["-webkit-transform"]="rotate(270deg) translate(-"+Number(y)+""+"px,-"+Number(x)+"px)",c["ms-transform-origin"]="0 0",c["ms-transform"]="rotate(270deg) translate(-"+Number(y)+""+"px,-"+Number(x)+"px)",c["transform-origin"]="0 0",c["transform"]="rotate(270deg) translate(-"+Number(y)+""+"px,-"+Number(x)+"px)",c["top"]="0";if(h&&k.browser.version!="9.0"){c["-ms-filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=-0, M12=1, M21=-1, M22=-0,sizingMethod='auto expand')";c["filter"]="progid:DXImageTransform.Microsoft.Matrix(M11=-0, M12=1, M21=-1, M22=-0,sizingMethod='auto expand')";if(align=="left"){y=height_thewindow-width_element};if(align=="center"){y=(height_thewindow-width_element)/2};if(align=="right"){y="0"};c["marginTop"]=Number(y)+"px";c["marginLeft"]=0;if(k.browser.version=="7.0"){c["left"]=0}}};g.css(c)};show_hide=function(){var a=k(".close",g);if(hide.toString()=="false"&&a!=undefined){a.remove()}else{if(a.val()==undefined){g.prepend('<a href="#" class="close">X</a>')}k(".close",g).toggle(function(e){e.preventDefault();if(h)g.css({"overflow":"hidden","height":height_hide+"px"});else g.css({"overflow":"hidden"}).animate({"height":height_hide+"px"})},function(e){e.preventDefault();if(h)g.css({"overflow":"auto","height":"auto"});else g.css({"overflow":"auto"}).animate({"height":height_element+"px"})})}};position_calculate();var i=null;k(window).bind('resize',function(){if(i)clearTimeout(i);i=setTimeout(position_calculate,100)});show_hide()})}})(jQuery);